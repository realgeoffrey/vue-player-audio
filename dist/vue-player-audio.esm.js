function t(t,e,n,o,i,s,r,a,d,u){"boolean"!=typeof r&&(d=a,a=r,r=!1);const c="function"==typeof n?n.options:n;let l;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),o&&(c._scopeId=o),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,d(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=l):e&&(l=r?function(t){e.call(this,u(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),l)if(c.functional){const t=c.render;c.render=function(e,n){return l.call(n),t(e,n)}}else{const t=c.beforeCreate;c.beforeCreate=t?[].concat(t,l):[l]}return n}const e={props:{audioSrc:{type:String,required:!0},startSecond:{type:Number,default:0},endSecond:{type:Number,default:0},autoplay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},loopGapMillisecond:{type:Number,default:50},controls:{type:Boolean,default:!1},preload:{type:String,default:"metadata"}},data:function(){return{isPlaying:!1,currentSecond:this.startSecond,maxSecond:0,allowSetCurrentTime:!0,setTimeoutId1:0,setTimeoutId2:0,setTimeoutId3:0}},watch:{audioSrc:function(){this.beginPlay()},startSecond:function(){this.beginPlay()}},mounted:function(){this.beginPlay()},beforeDestroy:function(){clearTimeout(this.setTimeoutId1),clearTimeout(this.setTimeoutId2),clearTimeout(this.setTimeoutId3)},methods:{beginPlay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.audioSrc;t&&(this.$refs.audioDom.currentTime=Math.max(this.startSecond,1e-6),this.autoplay&&this.$refs.audioDom.play())},loopPlayOrEndPause:function(){var t=this;this.loop?(this.$refs.audioDom.currentTime=this.startSecond,this.setTimeoutId2=setTimeout((function(){try{t.$refs.audioDom.play()}catch(t){}}),this.loopGapMillisecond)):(this.$refs.audioDom.pause(),this.$refs.audioDom.currentTime=this.startSecond)},setIsPlaying:function(){var t=this;clearTimeout(this.setTimeoutId1),this.setTimeoutId1=setTimeout((function(){try{t.isPlaying=!t.$refs.audioDom.paused}catch(t){}}),this.loopGapMillisecond+20)},timeupdateHandler:function(){var t=this;try{this.maxSecond=this.$refs.audioDom.duration,this.currentSecond=this.$refs.audioDom.currentTime,this.currentSecond<this.startSecond?this.allowSetCurrentTime&&(this.$refs.audioDom.currentTime=this.startSecond,this.allowSetCurrentTime=!1,this.setTimeoutId3=setTimeout((function(){t.allowSetCurrentTime=!0}),1e3)):((0!==this.endSecond&&this.currentSecond>=this.endSecond||0!==this.maxSecond&&this.currentSecond>=this.maxSecond)&&this.loopPlayOrEndPause(),this.setIsPlaying())}catch(t){}},endedHandler:function(){try{this.loopPlayOrEndPause()}catch(t){}},pauseHandler:function(){this.setIsPlaying()}}};var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("audio",{ref:"audioDom",attrs:{src:t.audioSrc,controls:t.controls,preload:t.preload},on:{timeupdate:t.timeupdateHandler,ended:t.endedHandler,pause:t.pauseHandler}}),t._v(" "),t._t("default",(function(){return[n("br"),t._v("\n    正在播放："+t._s(t.isPlaying)+"\n    "),n("br"),t._v("\n    当前时间："+t._s(t.currentSecond)+"\n    "),n("br"),t._v("\n    最大时间："+t._s(t.maxSecond)+"\n    "),n("br")]}),{isPlaying:t.isPlaying,currentSecond:t.currentSecond,maxSecond:t.maxSecond})],2)};n._withStripped=!0;const o=t({render:n,staticRenderFns:[]},void 0,e,void 0,!1,void 0,!1,void 0,void 0,void 0);o.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.component||"vue-player-audio",o)};export{o as default};
